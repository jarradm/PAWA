@model PAWA.ViewModels.AlbumViewModel
@{
    ViewBag.Title = "Album";
}

<link rel="stylesheet" href="~/App_Themes/Album.css" type="text/css" />

<div id="body-area">
    <div id="body-content-area">
        <div id="page-top"></div>
        @using(Html.BeginForm("Album", "Home", FormMethod.Post))
        {
            <select name="DropDownList" id="DropDownList">
                <option value="Edit">Edit Selected</option>
                <option value="Move">Move Selected</option>
                <option value="Delete">Delete Selected</option>
            </select>
            
            <input type="submit" name="Submit" value="Go" />
            <input type="button" name="Create" value="Create Folder" id="body-content-button-create" disabled />
            
            @*PAWA.Classes.AlbumGrid ag = new PAWA.Classes.AlbumGrid(new PAWA.DAL.PAWAContext());*@
            foreach(var table in Model.ag.CreateTable1(Model.FolderID))
            {
                @Html.Raw(table);
            }
            @*Html.Raw(Model.ag.CreateTable1(Model.FolderID));*@
            
            <input type="button" name="NextPage" value="Next Page" id="body-content-button-next" />
            <a href="#page-top"><input type="button" value="Go To Top" id="body-content-button-top" /></a>
        }
    </div>
</div>

<script type="text/javascript">

    $(document).ready(function () {
        $("input[name='Submit']").click(function () {
            if ($('#DropDownList').val() == "Delete") {

                //check if anything was selected
                if (!hasChecked()) {
                    //Nothing was so show a message.
                    alert("You have not selected any images to delete.");
                    return;
                }

                return confirm('These images will be permanently deleted. Do you wish to continue?');
            }
        });
    });
</script>

<script type="text/javascript">
    function hasChecked() {
        //Get input elements
        var inputs = document.getElementsByTagName("input"); //or document.forms[0].elements;  

        //For all elements
        for (var i = 0; i < inputs.length; i++) {
            //If it is a checkbox
            if (inputs[i].type == "checkbox") 
            {
                //That is selected
                if (inputs[i].checked) {
                    //Then something was
                    return true;
                }
            }
        }
        //Nothing was selected
        return false;
    };
</script>

<script>
    var count = 1;
    $(document).ready(Position());

    function Position()
    {
        // Check this first, because hiding the next page button will mess with the positioning of go to top button,
        // so reposition after hide.
        CheckMorePages();

        $("#page-top").position({ my: "center top", at: "center top", of: "body", collision: "none" });
        $("#body-content-button-create").position({ my: "right top", at: "right-4 top+2", of: "#body-content-area", collision: "none" });
        $("#body-content-button-next").position({ my: "center bottom", at: "center bottom-32", of: "#body-content-area", collision: "none" });
        $("#body-content-button-top").position({ my: "right bottom", at: "right-4 bottom-32", of: "#body-content-area", collision: "none" });
        $(".body-content-table-checkbox").each(function () {
            $(this).position({ my: "right bottom", at: "right-5 bottom-5", of: $(this).parent().children("img"), collision: "none" });
        });
        $(".body-content-table-folder-text").each(function () {
            $(this).position({ my: "center", at: "center center+10", of: $(this).parent().children("img"), collision: "none" });
        });
    }

    function CheckMorePages()
    {
        var element = "#table-" + count;

        if ($(element).length == 0)
        {
            $("#body-content-button-next").hide();
        }
    }

    $("#body-content-button-next").click(function() {
        var element = "#table-" + count;
        $(element).show();
        count++;
        Position();
    });
        
</script>
